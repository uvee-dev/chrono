{"version":3,"file":"chrono.umd.js","sources":["../src/index.js"],"sourcesContent":["class Chrono {\n  constructor() {\n    this.callbacks = [];\n    this.now = performance.now();\n    this.raf = this.raf.bind(this);\n    requestAnimationFrame(this.raf);\n  }\n\n  /**\n   * Adds a callback to the requestAnimationFrame loop with an optional priority.\n   * @param {Function} callback - The function to call each frame.\n   * @param {number} [priority=0] - The priority of the callback. Lower numbers run earlier.\n   * @returns {Function} - A function to remove the callback from the loop.\n   */\n  add(callback, priority = 0) {\n    this.callbacks.push({ callback, priority });\n    this.callbacks.sort((a, b) => a.priority - b.priority);\n\n    return () => this.remove(callback);\n  }\n\n  /**\n   * Removes a callback from the requestAnimationFrame loop.\n   * @param {Function} callback - The function to remove.\n   */\n  remove(callback) {\n    this.callbacks = this.callbacks.filter(({ callback: cb }) => callback !== cb);\n  }\n\n  /**\n   * The requestAnimationFrame loop handler.\n   * @param {number} now - The current timestamp.\n   */\n  raf(now) {\n    requestAnimationFrame(this.raf);\n\n    const deltaTime = now - this.now;\n    this.now = now;\n\n    for (const { callback } of this.callbacks) {\n      callback(now, deltaTime);\n    }\n  }\n}\n\nconst isClient = typeof window !== 'undefined';\nconst chronoInstance = isClient ? new Chrono() : null;\n\nexport default chronoInstance;\n"],"names":["window","Chrono","this","callbacks","now","performance","raf","bind","requestAnimationFrame","_proto","prototype","add","callback","priority","_this","push","sort","a","b","remove","filter","_ref","deltaTime","_step","_iterator","_createForOfIteratorHelperLoose","done","value"],"mappings":"yUA6CmC,oBAAXA,OACU,iBA7ChC,WAAA,SAAAC,IACEC,KAAKC,UAAY,GACjBD,KAAKE,IAAMC,YAAYD,MACvBF,KAAKI,IAAMJ,KAAKI,IAAIC,KAAKL,MACzBM,sBAAsBN,KAAKI,IAC7B,CAAC,IAAAG,EAAAR,EAAAS,UAoCA,OApCAD,EAQDE,IAAA,SAAIC,EAAUC,GAAcC,IAAAA,OAI1B,YAJoB,IAARD,IAAAA,EAAW,GACvBX,KAAKC,UAAUY,KAAK,CAAEH,SAAAA,EAAUC,SAAAA,IAChCX,KAAKC,UAAUa,KAAK,SAACC,EAAGC,GAAC,OAAKD,EAAEJ,SAAWK,EAAEL,QAAQ,GAE9C,WAAA,OAAMC,EAAKK,OAAOP,EAAS,CACpC,EAACH,EAMDU,OAAA,SAAOP,GACLV,KAAKC,UAAYD,KAAKC,UAAUiB,OAAO,SAAAC,GAAW,OAAWT,IAAPS,EAAZT,QAAkC,EAC9E,EAACH,EAMDH,IAAA,SAAIF,GACFI,sBAAsBN,KAAKI,KAE3B,IAAMgB,EAAYlB,EAAMF,KAAKE,IAC7BF,KAAKE,IAAMA,EAEX,IAAA,IAAyCmB,EAAzCC,2qBAAAC,CAA2BvB,KAAKC,aAASoB,EAAAC,KAAAE,OACvCd,EADmBW,EAAAI,MAARf,UACFR,EAAKkB,EAElB,EAACrB,CAAA,CAzCD,IA6C+C"}